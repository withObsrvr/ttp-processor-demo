# Index Plane Transformer Configuration

service:
  name: "index-plane-transformer"
  version: "1.0.0"
  poll_interval_seconds: 30      # Poll Bronze Hot every 30 seconds
  batch_size: 10000               # Process 10,000 ledgers per batch

# Source: Bronze Hot (PostgreSQL stellar_hot)
bronze_hot:
  host: "${PG_HOT_HOST}"
  port: 25060
  database: "stellar_hot"
  user: "${PG_HOT_USER}"
  password: "${PG_HOT_PASSWORD}"
  sslmode: "require"

# Target: Index Plane (DuckLake)
index_cold:
  catalog_name: "testnet_catalog"
  schema_name: "index"
  table_name: "tx_hash_index"
  duckdb_path: "/tmp/duckdb/index_writer.db"

  # B2 storage for Index Plane
  s3_endpoint: "s3.us-west-004.backblazeb2.com"
  s3_region: "us-west-004"
  s3_access_key_id: "${B2_KEY_ID}"
  s3_secret_access_key: "${B2_KEY_SECRET}"
  s3_bucket: "${B2_INDEX_BUCKET}"
  partition_size: 100000

# Checkpoint (uses same DB as Bronze Hot)
checkpoint:
  table: "index.transformer_checkpoint"

# Health endpoint
health:
  port: 8096
